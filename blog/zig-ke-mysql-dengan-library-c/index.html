<!DOCTYPE html>
<html lang="id-id" class="font-1-available">
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="generator" content="Hugo 0.111.3">


<title>Zig ke Mysql Dengan Library C - Hazuli Fidastian</title>
<meta property="og:type" content="article" />
<meta property="og:title" content="Zig ke Mysql Dengan Library C - Hazuli Fidastian">
<title itemprop="name">Zig ke Mysql Dengan Library C | Hazuli Fidastian</title>
<meta name="twitter:title" content="Zig ke Mysql Dengan Library C | Hazuli Fidastian" />
<meta itemprop="name" content="Zig ke Mysql Dengan Library C | Hazuli Fidastian" />
<meta name="application-name" content="Zig ke Mysql Dengan Library C | Hazuli Fidastian" />
<meta property="og:site_name" content="" />


<link href='https://hazulifidastian.github.io/favicon.ico' rel='icon' type='image/x-icon' />









<meta property="og:type" content="article" />
<meta property="article:publisher" content="" />
<meta property="og:article:published_time" content=2023-03-25T22:14:30&#43;0700 />
<meta property="article:published_time" content=2023-03-25T22:14:30&#43;0700 />

<script defer type="application/ld+json">
    {
      "@context": "http://schema.org",
      "@type": "Article",
      "headline": "Zig ke Mysql Dengan Library C",
      "author": {
        "@type": "Person",
        "name": ""
      },
      "datePublished": "2023-03-25",
      "description": "",
      "wordCount":  466 ,
      "mainEntityOfPage": "True",
      "dateModified": "2023-03-25",
      "image": {
        "@type": "imageObject",
        "url": ""
      },
      "publisher": {
        "@type": "Organization",
        "name": "Hazuli Fidastian",
        "logo": {
          "@type": "imageObject",
          "url": "favicon.ico"
        }
      }
    }
  </script>


<base href="https://hazulifidastian.github.io/blog/zig-ke-mysql-dengan-library-c/">
<link rel="canonical" href="https://hazulifidastian.github.io/blog/zig-ke-mysql-dengan-library-c/" itemprop="url" />
<meta name="url" content="https://hazulifidastian.github.io/blog/zig-ke-mysql-dengan-library-c/" />
<meta name="twitter:url" content="https://hazulifidastian.github.io/blog/zig-ke-mysql-dengan-library-c/" />
<meta property="og:url" content="https://hazulifidastian.github.io/blog/zig-ke-mysql-dengan-library-c/" />

<meta name="robots" content="index,follow" />
<meta name="googlebot" content="index,follow" />
<meta name="google-site-verification" content="Won_YvYvA2MlMOjNNvvHeLbAwVOs3Qt9-Dbaj-MtHAo" />


<meta name="theme-color" content="#1997A5" />
<meta name="msapplication-TileColor" content="#1997A5" />

<meta name="keywords" content="" />
<meta name="imagemode" content="force" />
<meta name="coverage" content="Worldwide" />
<meta name="distribution" content="Global" />
<meta name="HandheldFriendly" content="True" />
<meta name="msapplication-tap-highlight" content="no" />
<meta name="apple-mobile-web-app-title" content="" />
<meta name="apple-mobile-web-app-capable" content="yes" />
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
<meta name="apple-touch-fullscreen" content="yes" />

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.3/css/bulma.min.css">
<link rel="stylesheet" href="https://hazulifidastian.github.io/css/main.css" media="all">
<link disabled id="night-mode-theme" rel="stylesheet" href="/css/night.css">

  </head>
  <body>
    <header class="header">
      <nav class="nav">
  <div class="nav-circle">
    <div class="bg"></div>
    <div class="bg bg2"></div>
    <div class="bg bg3"></div>
    <a href="https://hazulifidastian.github.io/" class="nav-logo">
      <img src="https://hazulifidastian.github.io/images/logo.png" 
          width="80" 
          height="80" 
          alt="Logo">
    </a>
  </div>
  
</nav>

    </header>




<main role="main">

  <div class="container">

    <article class="article">

      <div class="article-section">

        <a class="article-section" href="https://hazulifidastian.github.io/blog/">blog</a>

      </div>



      <h1 class="article-title">Zig ke Mysql Dengan Library C</h1>



      <div class="article-meta">

        <span class="article-date">

          
    
    

    
    
    Sabtu, 25 Maret 2023




        </span>

        

        <svg style="position:relative; bottom: -2px;" viewBox="0 0 24 24" width="18" height="18" stroke="currentColor"
          stroke-width="1" fill="none" stroke-linecap="round" stroke-linejoin="round" class="feather-icon">
          <circle cx="12" cy="12" r="10"></circle>
          <polyline points="12 6 12 12 16 14"></polyline>
        </svg>

        <span class="article-duration">3 min read</span>

        

      </div>



      

      

      

<div id="article-toc">
  <input id="collapsible" class="toggle" type="checkbox">
  <label for="collapsible" class="lbl-toggle" title="Daftar Isi">
    Klik 
    <span class="toggle-melihat-icon">
      <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 -4 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-toggle-left"><rect x="1" y="5" width="22" height="14" rx="7" ry="7"></rect><circle cx="8" cy="12" r="3"></circle></svg>
    </span>
    <span class="toggle-menyembunyikan-icon">
      <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 -4 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-toggle-right"><rect x="1" y="5" width="22" height="14" rx="7" ry="7"></rect><circle cx="16" cy="12" r="3"></circle></svg>    </span>
    <span class="toggle-melihat-text">untuk melihat daftar isi.</span>
    <span class="toggle-menyembunyikan-text">untuk menyembunyikan daftar isi.</span>
  </label>
  
  <div class="collapsible-content">
    <div class="content-inner">
      <div id="article-toc-content">
        <h2 class="toc-title">Daftar Isi</h2>
        <nav id="TableOfContents">
  <ul>
    <li><a href="#persiapan">Persiapan</a>
      <ul>
        <li><a href="#install-mysql-client-dev-library">Install MySQL Client Dev Library</a></li>
        <li><a href="#inisiasi-aplikasi">Inisiasi Aplikasi</a></li>
      </ul>
    </li>
    <li><a href="#kode">Kode</a>
      <ul>
        <li><a href="#edit-file-buildzig">Edit File <code>build.zig</code></a></li>
        <li><a href="#impor-mysql">Impor MySQL</a></li>
        <li><a href="#koneksi-ke-mysql">Koneksi ke MySQL</a></li>
        <li><a href="#membuat-database">Membuat Database</a></li>
        <li><a href="#membuat-tabel">Membuat Tabel</a></li>
        <li><a href="#menambah-data">Menambah Data</a></li>
        <li><a href="#mengambil-data">Mengambil Data</a></li>
      </ul>
    </li>
    <li><a href="#compile-and-run">Compile and Run</a>
      <ul>
        <li><a href="#kode-lengkap">Kode Lengkap</a></li>
      </ul>
    </li>
    <li><a href="#referensi">Referensi</a></li>
  </ul>
</nav>
      </div>
    </div>
  </div>
</div>



      

      


      <div class="article-content">

        <p>Ujicoba ini menggunakan zig versi 0.9.1 di platform Ubuntu 20.04 WSL 2 Windows.</p>
<h2 id="persiapan">Persiapan</h2>
<h3 id="install-mysql-client-dev-library">Install MySQL Client Dev Library</h3>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>$ apt install default-libmysqlclient-dev
</span></span></code></pre></div><p>Instalasi ini menghasilkan file header <strong>mysql.h</strong> pada folder <strong>/usr/include/mysql</strong> yang akan digunakan sebagai referensi oleh kode zig.</p>
<h3 id="inisiasi-aplikasi">Inisiasi Aplikasi</h3>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>$ mkdir zig_mysql
</span></span><span style="display:flex;"><span>$ <span style="color:#0086b3">cd</span> zig_mysql
</span></span><span style="display:flex;"><span>$ zig init-exe
</span></span></code></pre></div><p>Perintah <code>zig init-exe</code> untuk membuat aplikasi executable, sedangkan <code>zig init-lib</code> untuk membuat library.</p>
<h2 id="kode">Kode</h2>
<h3 id="edit-file-buildzig">Edit File <code>build.zig</code></h3>
<p>File <strong>build.zig</strong> tersedia setelah perintah <code>zig init-exe</code>.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid;"><code class="language-zig" data-lang="zig"><span style="display:flex;"><span><span style="color:#000;font-weight:bold">const</span><span style="color:#bbb"> </span>exe<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span>b.addExecutable(<span style="color:#d14">&#34;mysql&#34;</span>,<span style="color:#bbb"> </span><span style="color:#d14">&#34;src/main.zig&#34;</span>);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>exe.setTarget(target);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>exe.setBuildMode(mode);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex; background-color:#e5e5e5"><span><span style="color:#bbb"></span>exe.addLibPath(<span style="color:#d14">&#34;/usr/lib/x86_64-linux-gnu&#34;</span>);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>exe.install();<span style="color:#bbb">
</span></span></span></code></pre></div><p>Folder <code>/usr/lib/x86_64-linux-gnu</code> berisi library yang diinstall pada OS Ubuntu.</p>
<h3 id="impor-mysql">Impor MySQL</h3>
<p><strong>src/main.zig</strong>.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-zig" data-lang="zig"><span style="display:flex;"><span><span style="color:#000;font-weight:bold">const</span><span style="color:#bbb"> </span>std<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span><span style="color:#0086b3">@import</span>(<span style="color:#d14">&#34;std&#34;</span>);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#000;font-weight:bold">const</span><span style="color:#bbb"> </span>mysql<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span><span style="color:#0086b3">@cImport</span>(<span style="color:#0086b3">@cInclude</span>(<span style="color:#d14">&#34;mysql.h&#34;</span>));<span style="color:#bbb">
</span></span></span></code></pre></div><p>Sekarang semua fungsi yang ada pada file header <strong>mysql.h</strong> bisa diakses dari variabel <code>mysql</code>.</p>
<h3 id="koneksi-ke-mysql">Koneksi ke MySQL</h3>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid;"><code class="language-zig" data-lang="zig"><span style="display:flex; background-color:#e5e5e5"><span><span style="color:#000;font-weight:bold">var</span><span style="color:#bbb"> </span>con<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span>mysql.mysql_init(<span style="color:#000;font-weight:bold">null</span>);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#000;font-weight:bold">if</span><span style="color:#bbb"> </span>(con<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">==</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">null</span>)<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex; background-color:#e5e5e5"><span><span style="color:#bbb">    </span>std.debug.print(<span style="color:#d14">&#34;{s}&#34;</span>,<span style="color:#bbb"> </span>.{mysql.mysql_error(con)});<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">	</span>exit(<span style="color:#099">1</span>);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex; background-color:#e5e5e5"><span><span style="color:#bbb"></span><span style="color:#000;font-weight:bold">if</span><span style="color:#bbb"> </span>(mysql.mysql_real_connect(con,<span style="color:#bbb"> </span><span style="color:#d14">&#34;127.0.0.1&#34;</span>,<span style="color:#bbb"> </span><span style="color:#d14">&#34;root&#34;</span>,<span style="color:#bbb"> </span><span style="color:#d14">&#34;root&#34;</span>,<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">null</span>,<span style="color:#bbb"> </span><span style="color:#099">0</span>,<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">null</span>,<span style="color:#bbb"> </span><span style="color:#099">0</span>)<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">==</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">null</span>)<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>finish_with_error(con);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>}<span style="color:#bbb">
</span></span></span></code></pre></div><p>Variabel <code>mysql.</code> sebagai prefix untuk memanggil fungsi yang ada pada <strong>mysql.h</strong>.</p>
<p>Fungsi <code>finish_with_error(con)</code> untuk menampilkan pesan error.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-zig" data-lang="zig"><span style="display:flex;"><span><span style="color:#000;font-weight:bold">fn</span><span style="color:#bbb"> </span>finish_with_error(con<span style="color:#000;font-weight:bold">:</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">*</span>mysql.MYSQL)<span style="color:#bbb"> </span><span style="color:#458;font-weight:bold">void</span><span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>std.debug.print(<span style="color:#d14">&#34;{s}&#34;</span>,<span style="color:#bbb"> </span>.{mysql.mysql_error(con)});<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>mysql.mysql_close(con);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>exit(<span style="color:#099">1</span>);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>}<span style="color:#bbb">
</span></span></span></code></pre></div><h3 id="membuat-database">Membuat Database</h3>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid;"><code class="language-zig" data-lang="zig"><span style="display:flex;"><span><span style="color:#000;font-weight:bold">fn</span><span style="color:#bbb"> </span>create_db(con<span style="color:#000;font-weight:bold">:</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">*</span>mysql.MYSQL)<span style="color:#bbb"> </span><span style="color:#458;font-weight:bold">void</span><span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex; background-color:#e5e5e5"><span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">if</span><span style="color:#bbb"> </span>(mysql.mysql_query(con,<span style="color:#bbb"> </span><span style="color:#d14">&#34;DROP DATABASE IF EXISTS &#34;</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">++</span><span style="color:#bbb"> </span>dbname)<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">&gt;</span><span style="color:#bbb"> </span><span style="color:#099">0</span>)<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span>finish_with_error(con);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex; background-color:#e5e5e5"><span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">if</span><span style="color:#bbb"> </span>(mysql.mysql_query(con,<span style="color:#bbb"> </span><span style="color:#d14">&#34;CREATE DATABASE IF NOT EXISTS &#34;</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">++</span><span style="color:#bbb"> </span>dbname)<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">&gt;</span><span style="color:#bbb"> </span><span style="color:#099">0</span>)<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span>finish_with_error(con);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>}<span style="color:#bbb">
</span></span></span></code></pre></div><p>Fungsi <code>mysql.mysql_query(&quot;...&quot;)</code> untuk mengirimkan perintah query MySQL.</p>
<h3 id="membuat-tabel">Membuat Tabel</h3>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-zig" data-lang="zig"><span style="display:flex;"><span><span style="color:#000;font-weight:bold">fn</span><span style="color:#bbb"> </span>create_table(con<span style="color:#000;font-weight:bold">:</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">*</span>mysql.MYSQL)<span style="color:#bbb"> </span><span style="color:#458;font-weight:bold">void</span><span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">if</span><span style="color:#bbb"> </span>(mysql.mysql_query(con,<span style="color:#bbb"> </span><span style="color:#d14">&#34;CREATE TABLE cars(id INT PRIMARY KEY AUTO_INCREMENT, name VARCHAR(255), price INT)&#34;</span>)<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">&gt;</span><span style="color:#bbb"> </span><span style="color:#099">0</span>)<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span>finish_with_error(con);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>}<span style="color:#bbb">
</span></span></span></code></pre></div><h3 id="menambah-data">Menambah Data</h3>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-zig" data-lang="zig"><span style="display:flex;"><span><span style="color:#000;font-weight:bold">fn</span><span style="color:#bbb"> </span>insert_data(con<span style="color:#000;font-weight:bold">:</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">*</span>mysql.MYSQL)<span style="color:#bbb"> </span><span style="color:#458;font-weight:bold">void</span><span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">if</span><span style="color:#bbb"> </span>(mysql.mysql_query(con,<span style="color:#bbb"> </span><span style="color:#d14">&#34;INSERT INTO cars VALUES(1, &#39;Audi&#39;, 52642)&#34;</span>)<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">&gt;</span><span style="color:#bbb"> </span><span style="color:#099">0</span>)<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span>finish_with_error(con);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">if</span><span style="color:#bbb"> </span>(mysql.mysql_query(con,<span style="color:#bbb"> </span><span style="color:#d14">&#34;INSERT INTO cars VALUES(2, &#39;Mercedes&#39;, 57127)&#34;</span>)<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">&gt;</span><span style="color:#bbb"> </span><span style="color:#099">0</span>)<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span>finish_with_error(con);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">if</span><span style="color:#bbb"> </span>(mysql.mysql_query(con,<span style="color:#bbb"> </span><span style="color:#d14">&#34;INSERT INTO cars VALUES(3,&#39;Skoda&#39;,9000)&#34;</span>)<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">&gt;</span><span style="color:#bbb"> </span><span style="color:#099">0</span>)<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span>finish_with_error(con);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">if</span><span style="color:#bbb"> </span>(mysql.mysql_query(con,<span style="color:#bbb"> </span><span style="color:#d14">&#34;INSERT INTO cars VALUES(4,&#39;Volvo&#39;,29000)&#34;</span>)<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">&gt;</span><span style="color:#bbb"> </span><span style="color:#099">0</span>)<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span>finish_with_error(con);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>}<span style="color:#bbb">
</span></span></span></code></pre></div><h3 id="mengambil-data">Mengambil Data</h3>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid;"><code class="language-zig" data-lang="zig"><span style="display:flex;"><span><span style="color:#000;font-weight:bold">fn</span><span style="color:#bbb"> </span>retrieve_data(con<span style="color:#000;font-weight:bold">:</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">*</span>mysql.MYSQL)<span style="color:#bbb"> </span><span style="color:#458;font-weight:bold">void</span><span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex; background-color:#e5e5e5"><span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">if</span><span style="color:#bbb"> </span>(mysql.mysql_query(con,<span style="color:#bbb"> </span><span style="color:#d14">&#34;SELECT * FROM cars&#34;</span>)<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">&gt;</span><span style="color:#bbb"> </span><span style="color:#099">0</span>)<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span>finish_with_error(con);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex; background-color:#e5e5e5"><span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">const</span><span style="color:#bbb"> </span>result<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span>mysql.mysql_store_result(con);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">if</span><span style="color:#bbb"> </span>(result<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">==</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">null</span>)<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span>finish_with_error(con);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex; background-color:#e5e5e5"><span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">const</span><span style="color:#bbb"> </span>num_fields<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span>mysql.mysql_num_fields(result);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex; background-color:#e5e5e5"><span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">var</span><span style="color:#bbb"> </span>row<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span>mysql.mysql_fetch_row(result);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex; background-color:#e5e5e5"><span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">while</span><span style="color:#bbb"> </span>(row<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">!=</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">null</span>)<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex; background-color:#e5e5e5"><span><span style="color:#bbb">        </span><span style="color:#000;font-weight:bold">var</span><span style="color:#bbb"> </span>i<span style="color:#000;font-weight:bold">:</span><span style="color:#bbb"> </span><span style="color:#458;font-weight:bold">usize</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span><span style="color:#099">0</span>;<span style="color:#bbb">
</span></span></span><span style="display:flex; background-color:#e5e5e5"><span><span style="color:#bbb">        </span><span style="color:#000;font-weight:bold">while</span><span style="color:#bbb"> </span>(i<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">&lt;</span><span style="color:#bbb"> </span>num_fields)<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">:</span><span style="color:#bbb"> </span>(i<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">+=</span><span style="color:#bbb"> </span><span style="color:#099">1</span>)<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex; background-color:#e5e5e5"><span><span style="color:#bbb">            </span>std.debug.print(<span style="color:#d14">&#34;{s}  &#34;</span>,<span style="color:#bbb"> </span>.{row[i]});<span style="color:#bbb">
</span></span></span><span style="display:flex; background-color:#e5e5e5"><span><span style="color:#bbb">        </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex; background-color:#e5e5e5"><span><span style="color:#bbb">        </span>std.debug.print(<span style="color:#d14">&#34;</span><span style="color:#d14">\n</span><span style="color:#d14">&#34;</span>,<span style="color:#bbb"> </span>.{});<span style="color:#bbb">
</span></span></span><span style="display:flex; background-color:#e5e5e5"><span><span style="color:#bbb">
</span></span></span><span style="display:flex; background-color:#e5e5e5"><span><span style="color:#bbb">        </span>row<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span>mysql.mysql_fetch_row(result);<span style="color:#bbb">
</span></span></span><span style="display:flex; background-color:#e5e5e5"><span><span style="color:#bbb">    </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>}<span style="color:#bbb">
</span></span></span></code></pre></div><ul>
<li><code>mysql.mysql_query(con, &quot;SELECT * FROM cars&quot;)</code> mengirimkan perintah untuk mengambil data</li>
<li><code>mysql.mysql_store_result(con)</code> menampung hasil query</li>
<li><code>mysql.mysql_num_fields(result)</code> jumlah fields/kolom data</li>
<li><code>mysql.mysql_fetch_row(result)</code> mengambil data per baris</li>
<li>baris <code>while (row != null)</code> pengulangan untuk menampilkan data</li>
</ul>
<h2 id="compile-and-run">Compile and Run</h2>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>$ zig build-exe src/main.zig -lmysqlclient -lc -I /usr/include/mysql
</span></span></code></pre></div><ul>
<li><code>-lmysqlclient</code> adalah referensi library <strong>libmysqlclient.so</strong> pada folder <strong>/usr/lib/x86_64-linux-gnu</strong></li>
<li><code>-lc</code> library c</li>
<li><code>-I /usr/include/mysql</code> folder pencarian include</li>
</ul>
<p>Jalankan aplikasi setelah proses building selesai.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>$ ./main
</span></span><span style="display:flex;"><span>Mysql Client version 8.0.32
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#099">1</span>  Audi  <span style="color:#099">52642</span>
</span></span><span style="display:flex;"><span><span style="color:#099">2</span>  Mercedes  <span style="color:#099">57127</span>
</span></span><span style="display:flex;"><span><span style="color:#099">3</span>  Skoda  <span style="color:#099">9000</span>
</span></span><span style="display:flex;"><span><span style="color:#099">4</span>  Volvo  <span style="color:#099">29000</span>
</span></span></code></pre></div><h3 id="kode-lengkap">Kode Lengkap</h3>
<p>Kode lengkap ada di <a href="https://github.com/hazulifidastian/zig-mysql">https://github.com/hazulifidastian/zig-mysql</a>.</p>
<h2 id="referensi">Referensi</h2>
<ol>
<li><a href="https://zetcode.com/db/mysqlc/">Tutorial MySQL C API programming</a></li>
<li><a href="https://ziglang.org/documentation/0.9.1/">Dokumentasi Zig</a></li>
</ol>




        
<div class="article-tags block mt-6 mb-6">
  
  <a class="tag is-black" href="https://hazulifidastian.github.io/tags/zig/">#zig</a
  >&nbsp;
  
  <a class="tag is-black" href="https://hazulifidastian.github.io/tags/mysql/">#mysql</a
  >&nbsp;
  
</div>



      </div>

    </article>



    

  </div>

</main>



<footer class="footer">
  <ul class="footer-links">
    
    <li>
      <a id="night-mode-toggle" title="Toggle Night/Light mode" class="footer-links-kudos" data-current-mode="light"
        style="cursor: pointer;"></a>
    </li>
    <li>
      <a href="https://gohugo.io/" class="footer-links-kudos">Made with <img
          src="https://hazulifidastian.github.io/images/hugo-logo.png" width="22" height="22" alt="Hugo logo"></a>
    </li>
  </ul>
</footer>



<script src="/js/night_toggle.js"></script>

</body>

</html>

