<!DOCTYPE html>
<html lang="id-id" class="font-1-available">

<head>
  <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="generator" content="Hugo 0.111.3">


<title>Script UDP Server Di Windows - Hazuli Fidastian</title>
<meta property="og:type" content="article" />
<meta property="og:title" content="Script UDP Server Di Windows - Hazuli Fidastian">
<title itemprop="name">Script UDP Server Di Windows | Hazuli Fidastian</title>
<meta name="twitter:title" content="Script UDP Server Di Windows | Hazuli Fidastian" />
<meta itemprop="name" content="Script UDP Server Di Windows | Hazuli Fidastian" />
<meta name="application-name" content="Script UDP Server Di Windows | Hazuli Fidastian" />
<meta property="og:site_name" content="" />



<link href='https://hazulifidastian.github.io/favicon.ico' rel='icon' type='image/x-icon' />









<meta property="og:type" content="article" />
<meta property="article:publisher" content="" />
<meta property="og:article:published_time" content=2023-03-26T05:36:52&#43;0700 />
<meta property="article:published_time" content=2023-03-26T05:36:52&#43;0700 />

<script defer type="application/ld+json">
    {
      "@context": "http://schema.org",
      "@type": "Article",
      "headline": "Script UDP Server Di Windows",
      "author": {
        "@type": "Person",
        "name": ""
      },
      "datePublished": "2023-03-26",
      "description": "",
      "wordCount":  220 ,
      "mainEntityOfPage": "True",
      "dateModified": "2023-03-26",
      "image": {
        "@type": "imageObject",
        "url": ""
      },
      "publisher": {
        "@type": "Organization",
        "name": "Hazuli Fidastian",
        "logo": {
          "@type": "imageObject",
          "url": "favicon.ico"
        }
      }
    }
  </script>


<base href="https://hazulifidastian.github.io/blog/script-udp-server-di-windows/">
<link rel="canonical" href="https://hazulifidastian.github.io/blog/script-udp-server-di-windows/" itemprop="url" />
<meta name="url" content="https://hazulifidastian.github.io/blog/script-udp-server-di-windows/" />
<meta name="twitter:url" content="https://hazulifidastian.github.io/blog/script-udp-server-di-windows/" />
<meta property="og:url" content="https://hazulifidastian.github.io/blog/script-udp-server-di-windows/" />

<meta name="robots" content="index,follow" />
<meta name="googlebot" content="index,follow" />
<meta name="google-site-verification" content="Won_YvYvA2MlMOjNNvvHeLbAwVOs3Qt9-Dbaj-MtHAo" />


<meta name="theme-color" content="#1997A5" />
<meta name="msapplication-TileColor" content="#1997A5" />

<meta name="keywords" content="" />
<meta name="imagemode" content="force" />
<meta name="coverage" content="Worldwide" />
<meta name="distribution" content="Global" />
<meta name="HandheldFriendly" content="True" />
<meta name="msapplication-tap-highlight" content="no" />
<meta name="apple-mobile-web-app-title" content="" />
<meta name="apple-mobile-web-app-capable" content="yes" />
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
<meta name="apple-touch-fullscreen" content="yes" />

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.3/css/bulma.min.css">

<link rel="stylesheet" href="https://hazulifidastian.github.io/css/main.css" media="all">

<link disabled id="night-mode-theme" rel="stylesheet" href="/css/night.css">
</head>

<body>
  <div class="container p-4 pt-6">
    <nav class="mb-6 is-vcentered">
  <a href="/" class="mr-3">Hazu.li</a>
  <a href="/tentang-saya" class="mr-3">Tentang Saya</a>
  <a href="/layanan" class="mr-3">Layanan</a>
  <a href="/blog">Blog</a>
</nav>
  </div>

<main role="main">
  <div class="container px-4">
    <article class="article">
      
      <div class="article-section">
        <a href="https://hazulifidastian.github.io/blog/">blog</a>
      </div>
      

      <h1 class="title is-title-1 mb-1">Script UDP Server Di Windows</h1>

      <p class="mb-6">
        <span>
    
    

    
    
    Minggu, 26 Maret 2023


</span>

        

        <svg style="position:relative; bottom: -2px;" viewBox="0 0 24 24" width="18" height="18" stroke="currentColor"
          stroke-width="1" fill="none" stroke-linecap="round" stroke-linejoin="round" class="feather-icon">
          <circle cx="12" cy="12" r="10"></circle>
          <polyline points="12 6 12 12 16 14"></polyline>
        </svg>

        <span>2 min read</span>

        

      </p>

      

      <div class="article-content">
        <p><strong>Bind port</strong></p>
<p>Script ini akan membuka port UDP 8080 disemua network interface.</p>
<div class="highlight"><pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-powershell" data-lang="powershell"><span style="display:flex;"><span><span style="color:#111">$port</span> <span style="color:#111">=</span> <span style="color:#ae81ff">8080</span>
</span></span><span style="display:flex;"><span><span style="color:#111">$endpoint</span> <span style="color:#111">=</span> <span style="color:#111">New-Object</span> <span style="color:#111">System</span><span style="color:#111">.</span><span style="color:#111">Net</span><span style="color:#111">.</span><span style="color:#111">IPEndPoint</span> <span style="color:#111">([</span><span style="color:#00a8c8">IPAddress</span><span style="color:#111">]::</span><span style="color:#111">Any</span><span style="color:#111">,</span> <span style="color:#111">$port</span><span style="color:#111">)</span>
</span></span><span style="display:flex;"><span><span style="color:#111">$socket</span> <span style="color:#111">=</span> <span style="color:#111">New-Object</span> <span style="color:#111">System</span><span style="color:#111">.</span><span style="color:#111">Net</span><span style="color:#111">.</span><span style="color:#111">Sockets</span><span style="color:#111">.</span><span style="color:#111">UdpClient</span> <span style="color:#111">$port</span>
</span></span></code></pre></div><p><strong>Baca data</strong></p>
<p>Data yang diterima dalam bentuk byte dikonversi menjadi string.</p>
<div class="highlight"><pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-powershell" data-lang="powershell"><span style="display:flex;"><span><span style="color:#111">$contentByte</span> <span style="color:#111">=</span> <span style="color:#111">$socket</span><span style="color:#111">.</span><span style="color:#111">Receive</span><span style="color:#111">([</span><span style="color:#00a8c8">ref</span><span style="color:#111">]</span><span style="color:#111">$endpoint</span><span style="color:#111">)</span>
</span></span><span style="display:flex;"><span><span style="color:#111">$enc</span> <span style="color:#111">=</span> <span style="color:#111">[</span><span style="color:#00a8c8">system.Text.Encoding</span><span style="color:#111">]::</span><span style="color:#111">UTF8</span>
</span></span><span style="display:flex;"><span><span style="color:#111">$contentStr</span> <span style="color:#111">=</span> <span style="color:#111">$enc</span><span style="color:#111">.</span><span style="color:#111">GetString</span><span style="color:#111">(</span><span style="color:#111">$contentByte</span><span style="color:#111">)</span>
</span></span></code></pre></div><p><strong>Token dan perintah</strong></p>
<p>Script ini saya gunakan untuk me-restart aplikasi lain. <code>$token</code> digunakan untuk pengaman,
dan <code>$command</code> adalah perintah yang diinginkan. Data harus dikirim dengan format <code>TOKEN:COMMAND</code>.</p>
<div class="highlight"><pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-powershell" data-lang="powershell"><span style="display:flex;"><span><span style="color:#111">$token</span><span style="color:#111">,</span> <span style="color:#111">$command</span> <span style="color:#111">=</span> <span style="color:#111">$contentStr</span><span style="color:#111">.</span><span style="color:#111">split</span><span style="color:#111">(</span><span style="color:#d88200">&#39;:&#39;</span><span style="color:#111">)</span>
</span></span></code></pre></div><p><strong>Validasi token</strong></p>
<p>Token yang dikirim oleh client harus diacak menggunakan algoritma <strong>SHA1</strong>. Token memuat
gabungan data token yang diset pada server dan tanggal saat mengirim perintah.</p>
<p>Contoh <code>TOKEN_DARI_SERVER20230101</code>.</p>
<p>Script dibawah ini adalah pengaman untuk memvalidasi token yang dikirim oleh client.</p>
<div class="highlight"><pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-powershell" data-lang="powershell"><span style="display:flex;"><span><span style="color:#111">$dateText</span> <span style="color:#111">=</span> <span style="color:#111">Get-Date</span> <span style="color:#111">-Format</span> <span style="color:#d88200">&#34;yyyyMMdd&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># token yang valid adalah gabungan hashed text dan tanggal sekarang</span>
</span></span><span style="display:flex;"><span><span style="color:#111">$tokenValidator</span> <span style="color:#111">=</span> <span style="color:#d88200">&#34;6f797fcc675fe0f411ef56931936c63b8a026660&#34;</span><span style="color:#111">+</span> <span style="color:#111">$dateText</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#111">$sha1</span> <span style="color:#111">=</span> <span style="color:#111">New-Object</span> <span style="color:#111">System</span><span style="color:#111">.</span><span style="color:#111">Security</span><span style="color:#111">.</span><span style="color:#111">Cryptography</span><span style="color:#111">.</span><span style="color:#111">SHA1CryptoServiceProvider</span>
</span></span><span style="display:flex;"><span><span style="color:#111">$hashByteArray</span> <span style="color:#111">=</span> <span style="color:#111">$sha1</span><span style="color:#111">.</span><span style="color:#111">computeHash</span><span style="color:#111">(</span><span style="color:#111">$enc</span><span style="color:#111">.</span><span style="color:#111">GetBytes</span><span style="color:#111">(</span><span style="color:#111">$tokenValidator</span><span style="color:#111">))</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#111">$validToken</span> <span style="color:#111">=</span> <span style="color:#d88200">&#34;&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#00a8c8">foreach</span> <span style="color:#111">(</span><span style="color:#111">$byte</span> <span style="color:#00a8c8">in</span> <span style="color:#111">$hashByteArray</span><span style="color:#111">)</span> <span style="color:#111">{</span>
</span></span><span style="display:flex;"><span>	<span style="color:#111">$validToken</span> <span style="color:#111">+=</span> <span style="color:#d88200">&#34;{0:X2}&#34;</span><span style="color:#111">.</span><span style="color:#111">ToLower</span><span style="color:#111">()</span> <span style="color:#f92672">-f</span> <span style="color:#111">$byte</span>
</span></span><span style="display:flex;"><span><span style="color:#111">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#00a8c8">if</span> <span style="color:#111">(</span><span style="color:#111">$token</span> <span style="color:#f92672">-eq</span> <span style="color:#111">$validToken</span><span style="color:#111">)</span> <span style="color:#111">{</span>
</span></span><span style="display:flex;"><span>	<span style="color:#75715e"># token valid</span>
</span></span><span style="display:flex;"><span><span style="color:#111">}</span> <span style="color:#00a8c8">else</span> <span style="color:#111">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># token tidak valid</span>
</span></span><span style="display:flex;"><span><span style="color:#111">}</span>
</span></span></code></pre></div><p><strong>Eksekusi perintah</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-powershell" data-lang="powershell"><span style="display:flex;"><span><span style="color:#00a8c8">if</span> <span style="color:#111">(</span><span style="color:#111">$command</span> <span style="color:#f92672">-eq</span> <span style="color:#d88200">&#34;RESTART&#34;</span><span style="color:#111">)</span> <span style="color:#111">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># matikan service yang error</span>
</span></span><span style="display:flex;"><span>    <span style="color:#111">taskkill</span> <span style="color:#111">/</span><span style="color:#111">IM</span> <span style="color:#111">$targetProcessName</span> <span style="color:#111">/</span><span style="color:#111">F</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># jalankan yang baru</span>
</span></span><span style="display:flex;"><span>    <span style="color:#111">Start-Process</span> <span style="color:#111">$targetProcessPath</span>
</span></span><span style="display:flex;"><span><span style="color:#111">}</span>
</span></span></code></pre></div><p><strong>Balas pesan</strong></p>
<p>Bagian ini untuk mengirimkan bytes &ldquo;OK&rdquo; ke client.</p>
<div class="highlight"><pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-powershell" data-lang="powershell"><span style="display:flex;"><span><span style="color:#111">$text</span> <span style="color:#111">=</span> <span style="color:#111">$enc</span><span style="color:#111">.</span><span style="color:#111">GetBytes</span><span style="color:#111">(</span><span style="color:#d88200">&#34;OK&#34;</span><span style="color:#111">)</span>
</span></span><span style="display:flex;"><span><span style="color:#111">[</span><span style="color:#00a8c8">void</span><span style="color:#111">]</span><span style="color:#111">$socket</span><span style="color:#111">.</span><span style="color:#111">Send</span><span style="color:#111">(</span><span style="color:#111">$text</span><span style="color:#111">,</span> <span style="color:#111">$text</span><span style="color:#111">.</span><span style="color:#111">Length</span><span style="color:#111">,</span> <span style="color:#111">$endpoint</span><span style="color:#111">)</span>
</span></span></code></pre></div><p><strong>Referensi</strong></p>
<ul>
<li>Kode lengkap bisa dilihat di <a href="https://gist.github.com/hazulifidastian/880279d67b71fd1b75ad7274bbfc213c">https://gist.github.com/hazulifidastian/880279d67b71fd1b75ad7274bbfc213c</a></li>
</ul>


        
<div class="article-tags block mt-6 mb-6">
  
  <a class="tag is-light" href="https://hazulifidastian.github.io/tags/powershell/">#powershell</a>&nbsp;
  
  <a class="tag is-light" href="https://hazulifidastian.github.io/tags/udp/">#udp</a>&nbsp;
  
</div>

      </div>
    </article>

    
  </div>
</main>

<footer class="footer">
  <ul class="footer-links">
    
    <li>
    </li>
    <li>
      <a href="https://gohugo.io/" class="footer-links-kudos">Made with <img
          src="https://hazulifidastian.github.io/images/hugo-logo.png" width="22" height="22" alt="Hugo logo"></a>
    </li>
  </ul>
</footer>



</body>

</html>